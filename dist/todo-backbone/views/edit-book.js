define("dist/todo-backbone/views/edit-book",["gallery/backbone/1.1.0/backbone","gallery/underscore/1.5.2/underscore","$","jquery/jquery/1.10.1/jquery"],function(a,b,c){var d=a("gallery/backbone/1.1.0/backbone"),e=a("jquery/jquery/1.10.1/jquery"),f=a("gallery/underscore/1.5.2/underscore"),g=d.View.extend({el:"#library",className:"editBookContainer",template:e("#formTemplate").html(),events:{"click .save":"save"},initialize:function(){console.log("EditBookView-initialize"),this.model.bind("change",this.render,this),this.model.bind("invalid",this.showErrors,this)},showErrors:function(a,b){this.$el.find(".has-error").removeClass("has-error"),this.$el.find(".alert").html(f.values(b).join("<br>")).show(),f.each(f.keys(b),f.bind(function(a){this.$el.find("*[name="+a+"]").parent().addClass("has-error")},this))},render:function(){var a=f.template(this.template);return this.$el.html(a(this.model.toJSON())),this.$el.find("h2").text("Edit Book"),this},close:function(){this.$el.unbind(),this.$el.empty()},save:function(a){console.log("save");var b=this.model.get("id");a.preventDefault(),a.stopPropagation(),this.model.set({title:this.$el.find("input[name=title]").val(),author:this.$el.find("input[name=author]").val(),description:this.$el.find("textarea[name=description]").val(),id:b}),this.model.save(null,{type:"GET",url:"server/add.php",data:e.param(this.model.toJSON()),success:function(a,b){console.log("success",a,b),window.location.hash="library/index"},error:function(a,b){console.log("error",a,b)}})}});c.exports=g});